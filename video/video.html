<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>🎞️ سينما الذكرى</title>
<link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&display=swap" rel="stylesheet" />

<style>
  :root{
    --bg1:#000; --bg2:#1b0033; --accent:#ff4d6d; --soft:#ccc;
    --glow:0 0 22px rgba(255,0,80,.45), 0 0 44px rgba(255,0,80,.25);
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  html{scroll-behavior:smooth}
  body{
    margin:0; font-family:'Amiri',serif; color:#fff; text-align:center; overflow-x:hidden;
    background:linear-gradient(to bottom,var(--bg1),var(--bg2) 70%,var(--bg1));
  }

  /* طبقة فنييت + ضوء متحرك */
  body::before, body::after{content:""; pointer-events:none; position:fixed; inset:0; z-index:-1}
  /* رماد خفيف */
  body::before{
    background:
      radial-gradient(80vmax 80vmax at 50% 20%, rgba(255,255,255,.02) 0%, transparent 60%) ,
      url("data:image/svg+xml;utf8,\
<svg xmlns='http://www.w3.org/2000/svg' width='140' height='140' viewBox='0 0 140 140'>\
<circle cx='10' cy='20' r='1' fill='white' opacity='.07'/>\
<circle cx='60' cy='70' r='1' fill='white' opacity='.10'/>\
<circle cx='120' cy='30' r='1' fill='white' opacity='.05'/>\
<circle cx='90' cy='110' r='1' fill='white' opacity='.08'/>\
</svg>") repeat;
    mix-blend-mode:screen; opacity:.25; animation:drift 30s linear infinite;
  }
  /* فنييت */
  body::after{
    background:
      radial-gradient(120vmax 120vmax at 50% -20%, transparent 30%, rgba(0,0,0,.55) 65%),
      radial-gradient(140vmax 140vmax at 50% 120%, transparent 40%, rgba(0,0,0,.65) 70%);
  }
  @keyframes drift{
    0%{background-position:0 0, 0 0}
    100%{background-position:0 0, 140px 280px}
  }

  /* هيدر */
  header{padding:64px 16px 32px}
  h1{margin:0 0 10px; color:var(--accent); text-shadow:0 0 18px rgba(255,0,80,.5)}
  .lead{
    margin:0 auto; max-width:780px; color:var(--soft); font-size:1.15rem; line-height:1.9;
    opacity:.9;
  }
  /* كتابة حرف-حرف */
  .type{
    display:inline-block; border-right:2px solid rgba(255,255,255,.35);
    white-space:nowrap; overflow:hidden
  }
  .cursor{animation:blink 1s steps(1) infinite}
  @keyframes blink{50%{border-right-color:transparent}}

  /* شريط أدوات */
  .toolbar{
    margin:26px auto 10px; display:flex; gap:10px; justify-content:center; align-items:center; flex-wrap:wrap;
  }
  .btn{
    appearance:none; border:1px solid rgba(255,255,255,.15); background:rgba(255,255,255,.06);
    color:#fff; padding:10px 16px; border-radius:12px; cursor:pointer; transition:.25s;
    font-family:'Amiri',serif; font-size:1rem; box-shadow:0 0 0 transparent;
  }
  .btn:hover{transform:translateY(-1px); box-shadow:var(--glow); border-color:rgba(255,77,109,.6)}
  .muted{opacity:.8}

  /* شبكة الفيديوهات */
  .videos{
    width:min(1200px,92vw); margin:22px auto 80px;
    display:grid; gap:28px;
    grid-template-columns:repeat(3, 1fr);
  }
  @media (max-width:980px){ .videos{grid-template-columns:repeat(2,1fr)} }
  @media (max-width:620px){ .videos{grid-template-columns:1fr} }

  .block{
    background:rgba(255,255,255,.03); border:1px solid rgba(255,255,255,.08);
    border-radius:16px; padding:14px; backdrop-filter:blur(6px);
    transition:transform .25s ease, box-shadow .3s ease, border-color .3s ease;
    position:relative; overflow:hidden; text-align:center;
  }
  .block::after{
    content:""; position:absolute; inset:-30% -10% auto -10%; height:60%;
    background:radial-gradient(60% 60% at 50% 50%, rgba(255,0,80,.12), transparent 60%);
    transform:translateY(100%); transition:transform .6s ease; pointer-events:none;
  }
  .block:hover{transform:translateY(-4px); box-shadow:var(--glow); border-color:rgba(255,77,109,.35)}
  .block:hover::after{transform:translateY(0)}

  video{
    width:100%; display:block; border-radius:10px;
    box-shadow:0 0 18px rgba(255,255,255,.12);
    outline:none; background:#000; aspect-ratio:16/9;
  }
  .caption{color:#bbb; margin-top:10px; font-size:1.05rem; font-style:italic; animation:cap 600ms ease}
  @keyframes cap{from{opacity:0; transform:translateY(6px)} to{opacity:1; transform:translateY(0)}}

  /* وضع تشغيل سينمائي */
  body.playing .block:not(.active){filter:grayscale(.8) brightness(.6) blur(.5px); transform:none}
  body.playing .block.active{box-shadow:0 0 0 2px rgba(255,77,109,.55), 0 0 40px rgba(255,0,80,.35)}

  /* رماد طافٍ */
  @keyframes float{
    0%{ transform:translateY(0) translateX(0); opacity:.5 }
    50%{ transform:translateY(-40vh) translateX(3vw); opacity:.25 }
    100%{ transform:translateY(-80vh) translateX(-2vw); opacity:0 }
  }

  /* زر العودة + ختام */
  .back-button{
    display:inline-block; margin:12px auto 30px; padding:10px 16px; border-radius:12px;
    color:#fff; text-decoration:none; border:1px solid rgba(255,255,255,.15);
    background:rgba(255,255,255,.06); transition:.25s;
  }
  .back-button:hover{transform:translateY(-1px); box-shadow:var(--glow); border-color:rgba(255,77,109,.6)}
  .fade-text{opacity:.85; margin:6px 0}
  .signature{opacity:.7; font-size:.95rem}
  /* شريط تمرير */
  ::-webkit-scrollbar{width:10px;height:10px}
  ::-webkit-scrollbar-thumb{background:rgba(255,255,255,.12); border-radius:20px}
  ::-webkit-scrollbar-track{background:rgba(255,255,255,.04)}
</style>
</head>
<body>

<header>
  <h1>سينما الذكرى 🥀</h1>
  <p class="lead">
    <span id="intro" class="type cursor"></span>
  </p>

  <div class="toolbar">
    <button id="musicBtn" class="btn">تشغيل الموسيقى 🎵</button>
    <button id="dimBtn" class="btn muted">وضع السينما 🎬</button>
  </div>
</header>

<main>
  <section class="videos" id="videosGrid">
    <!-- الفيديوهات ستتولد هنا -->
  </section>

  <a class="back-button" href="../home.html">← عُد إلى صفحة البداية</a>

  <p class="fade-text">💔 في نهاية الذاكرة…</p>
  <p class="fade-text">رحلتكِ ما كانت ذكرى… كانت وطن، وأنا أصبحت لاجئاً بعدك</p>
  <p class="fade-text signature">ستار - آخر نبضة حنين، تموز 2025</p>

  <div style="text-align:center; margin-top: 20px;">
    <button onclick="window.location.href='../index.html'" class="back-button">
      🔙 عودة إلى الصفحة الرئيسية
    </button>
  </div>
</main>

<!-- موسيقى اختيارية -->
<audio id="bgm" preload="none" loop>
  <source src="https://files.catbox.moe/h8tdkz.mp3" type="audio/mpeg" />
</audio>

<script>
/* ===== مقدّمة كتابة حرف-حرف ===== */
const introText = "كل مقطع يهمس: كان هنا قلب… وكان هنا وطن.";
const introEl = document.getElementById('intro');
let ti = 0;
(function typeNext(){
  if(ti <= introText.length){
    introEl.textContent = introText.slice(0, ti++);
    setTimeout(typeNext, 55);
  }else{
    introEl.classList.remove('cursor');
  }
})();

/* ===== بيانات الفيديوهات (من قائمتك) ===== */
const items = [
  {caption:"هذه اللحظة… تمنيت الزمن يوقف 🕰", src:"2023-05-24_D9DDC076-15CF-4DD5-92D4-8F6D77216814-main.mp4"},
  {caption:"نظرتك كانت وطن وراح", src:"Snapchat-456095388.mp4"},
  {caption:"كنا نضحك، واليوم حتى البكاء صعب 💔", src:"filtered-0D712297-C19E-421D-B8E5-6E7C351DA601.mp4"},
  {caption:"ليش الوداع كان أسهل عليك؟", src:"2023-10-27_E5BD4CCE-A600-4100-B30D-52A29588D780-main.mp4"},
  {caption:"أنا بعدك… بس مو أنا", src:"2024-01-06_C0E0FCD5-59DF-4336-8833-4F6C8632DE56-main.mp4"},
  {caption:"خليتك تمشين… وأنا أنتهي", src:"2024-08-21_91EC9F9B-1E56-48B1-8E00-2442E24DE9F6-main.mp4"},
  {caption:"أريد أنسى… والوجع يرفض", src:"2025-04-03_7E3F89BB-2F5B-4399-986A-EC638110745F-main.mp4"},
  {caption:"أغنيتنا صارت تبكيني", src:"3F01CDA5-9D11-4059-8E92-599FDC44951A.mp4"},
  {caption:"هاي اللحظة؟ صارت حلم مستحيل", src:"2023-03-25_02238C8C-7FB2-4A4F-BBDA-9B59CED2D673-main.mp4"},
  {caption:"هذا المقطع شاهد على كلشي", src:"61F7DBBD-A96F-4611-8677-BA45C4105E2F.mp4"},
  {caption:"لحظة كانت حلوة وصارت سم", src:"991F6113-6B93-4A92-8DD1-E75BCAB218C2.mp4"},
  {caption:"ما توقعت النهاية تجي هيچ", src:"A56A9B64-B065-4B56-9E73-6CBEA68EB36E.mp4"},
  {caption:"تفاصيلك كانت تبهرني… وذوبتني", src:"ad341761-2f59-46ac-931c-3227bb200943.mp4"},
  {caption:"حتى الأماكن تبكي بعدك", src:"23932f1c-2131-4d09-9f3d-19b49fb7bcc2.mp4"},
  {caption:"🎞️ فيديو 15", src:"IMG_1020.mp4"},
  {caption:"مشيتِ… بس الذكرى ما مشيت", src:"Snapchat-445779982.mp4"},
  {caption:"ما ودّعتك… بس كل نظرة وداع", src:"IMG_6243.mp4"},
  {caption:"كل فيديو… جرح جديد 🩸", src:"Snapchat-2058943574.mp4"},
  {caption:"الشارع هذا يحن لصوتك", src:"c562049c-bacc-4ce0-ade5-229e202869bc.mp4"},
  {caption:"العيون ما تكذب… كنت أعرف", src:"94EDC6D6-CBEB-4D3C-BD1F-3F1289E7C7BF.mp4"},
  {caption:"تركتيني بلا نظرة أخيرة", src:"Snapchat-445779982.mp4"},
  {caption:"ضحكتك عايشة فيّ رغم الألم", src:"IMG_3922.mp4"},
  {caption:"ياليتني قلت: لا تروحين", src:"https://files.catbox.moe/uwja7p.mov"},
  {caption:"كان حضنك أمان، واليوم قلبي يخاف", src:"https://files.catbox.moe/r6gw93.mov"},
  {caption:"صار حبك مثل النبض… موجع", src:"https://files.catbox.moe/om93jr.mov"},
];

/* ===== توليد الشبكة ===== */
const grid = document.getElementById('videosGrid');
items.forEach((it)=>{
  const block = document.createElement('div'); block.className = 'block';
  const v = document.createElement('video');
  v.controls = true; v.preload = 'metadata';
  v.src = it.src; v.setAttribute('playsinline',''); v.setAttribute('webkit-playsinline','');
  const cap = document.createElement('div'); cap.className = 'caption'; cap.textContent = it.caption;
  block.appendChild(v); block.appendChild(cap); grid.appendChild(block);

  // تمييز العنصر عند التشغيل
  v.addEventListener('play', ()=>{
    document.body.classList.add('playing');
    document.querySelectorAll('.block').forEach(b=>b.classList.remove('active'));
    block.classList.add('active');
  });
  // عند الإيقاف إذا ما في فيديو آخر شغّال نلغي وضع السينما
  v.addEventListener('pause', ()=> {
    setTimeout(()=>{
      const anyPlaying = [...document.querySelectorAll('video')].some(x=>!x.paused && !x.ended);
      if(!anyPlaying){ document.body.classList.remove('playing'); block.classList.remove('active'); }
    }, 50);
  });
});

/* ===== زر الموسيقى ===== */
const music = document.getElementById('bgm');
const musicBtn = document.getElementById('musicBtn');
let musicOn = false;
musicBtn.addEventListener('click', async ()=>{
  try{
    if(!musicOn){ await music.play(); musicOn = true; musicBtn.textContent = "إيقاف الموسيقى ⏸️"; }
    else{ music.pause(); musicOn = false; musicBtn.textContent = "تشغيل الموسيقى 🎵"; }
  }catch(e){ console.log(e); }
});

/* ===== زر وضع السينما اليدوي ===== */
const dimBtn = document.getElementById('dimBtn');
let dimManual = false;
dimBtn.addEventListener('click', ()=>{
  dimManual = !dimManual;
  document.body.classList.toggle('playing', dimManual);
  dimBtn.classList.toggle('muted', !dimManual);
});

/* ===== جزيئات رماد عائمة خفيفة ===== */
(function ashes(){
  const MAX = 40;
  const frag = document.createDocumentFragment();
  for(let i=0;i<MAX;i++){
    const s = document.createElement('span');
    const size = (Math.random()*2+1).toFixed(2);
    s.style.position='fixed';
    s.style.left = (Math.random()*100).toFixed(2) + 'vw';
    s.style.top = (Math.random()*100).toFixed(2) + 'vh';
    s.style.width = size+'px';
    s.style.height = size+'px';
    s.style.borderRadius = '50%';
    s.style.background = 'rgba(255,255,255,.09)';
    s.style.filter = 'blur(.5px)';
    s.style.pointerEvents = 'none';
    s.style.zIndex = '-1';
    s.style.animation = `float ${(Math.random()*18+14).toFixed(2)}s linear infinite`;
    frag.appendChild(s);
  }
  document.body.appendChild(frag);
})();
</script>
</body>
</html>
